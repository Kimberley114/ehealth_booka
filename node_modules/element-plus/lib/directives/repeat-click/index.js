"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const dom_1 = require("../../utils/dom");
exports.default = {
    beforeMount(el, binding) {
        let interval = null;
        let startTime;
        const handler = () => binding.value && binding.value();
        const clear = () => {
            if (Date.now() - startTime < 100) {
                handler();
            }
            clearInterval(interval);
            interval = null;
        };
        dom_1.on(el, 'mousedown', e => {
            if (e.button !== 0)
                return;
            startTime = Date.now();
            dom_1.once(document, 'mouseup', clear);
            clearInterval(interval);
            interval = setInterval(handler, 100);
        });
    },
};
